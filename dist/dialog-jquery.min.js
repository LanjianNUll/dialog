/*! calendar tianxiangbing http://www.lovewebgames.com/jsmodule/dialog.html 2015-03-18 */
function Dialog(){var a=Math.random().toString().replace(".","");this.id="dialog_"+a,this.settings={},this.settings.closeTpl=$('<span class="ui-dialog-close js-dialog-close">x</span>'),this.settings.titleTpl=$('<div class="ui-dialog-title"></div>'),this.timer=null}Dialog.prototype={init:function(a){this.settings=$.extend({},this.settings,a),this.settings.mask&&(this.mask=$('<div class="ui-dialog-mask"/>'),$("body").append(this.mask)),$("body").append('<div class="ui-dialog" id="'+this.id+'"></div>'),this.dialogContainer=$("#"+this.id);var b=this.settings.zIndex||10;this.dialogContainer.css({zIndex:b}),this.mask.css({zIndex:b-1}),this.settings.closeTpl&&this.dialogContainer.append(this.settings.closeTpl),this.settings.title&&(this.dialogContainer.append(this.settings.titleTpl),this.settings.titleTpl.html(this.settings.title)),this.bindEvent(),this.settings.show&&this.show()},bindEvent:function(){var a=this;this.settings.trigger&&$(this.settings.trigger).click(function(){a.show()}),$(this.dialogContainer).delegate(".js-dialog-close","click",function(){return a.hide(),!1}),$(window).resize(function(){a.setPosition()}),$(window).scroll(function(){a.setPosition()}),$(window).keydown(function(b){27===b.keyCode&&a.hide()})},hide:function(){var a=this;"object"==typeof this.settings.target&&this.dailogContent.append("body"),this.settings.beforeHide&&this.settings.beforeHide.call(this,this.dailogContent),this.dialogContainer.removeClass("zoomIn").addClass("zoomOut"),setTimeout(function(){a.dialogContainer.hide()},500),this.mask.hide()},show:function(){this.dailogContent="string"==typeof this.settings.target?$(/^(\.|\#\w+)/gi.test(this.settings.target)?this.settings.target:"<div>"+this.settings.target+"</div>"):this.settings.target,this.settings.beforeShow&&this.settings.beforeShow.call(this,this.dailogContent),this.mask.show(),this.dailogContent.show(),this.height=this.settings.height||this.dialogContainer.height(),this.width=this.settings.width||this.dialogContainer.width(),this.dialogContainer.append(this.dailogContent).show().css({height:this.height,width:this.width}).addClass("zoomIn").removeClass("zoomOut").addClass("animated"),this.setPosition()},setPosition:function(){var a=this;this.mask.height(document.documentElement.scrollHeight||document.body.scrollHeight);var b=document.documentElement.clientHeight||document.body.clientHeight,c=document.documentElement.clientWidth||document.body.clientWidth,d=document.documentElement.scrollTop||document.body.scrollTop,e=(b-this.height)/2+d,f=(c-this.width)/2;0>f&&(f=0),d>e&&(e=d),clearTimeout(this.timer),this.timer=setTimeout(function(){a.dialogContainer.animate({top:e,left:f}),clearTimeout(a.timer)},100)}},function(a){a.fn.Dialog=function(b){var c=[];return a(this).each(function(){var d=new Dialog,e=a.extend({trigger:a(this)},b);d.init(e),c.push(d)}),c}}(jQuery);